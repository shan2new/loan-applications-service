files:
  # Ensure we have a proper .npmrc in place
  "/tmp/.npmrc":
    mode: "000644"
    owner: webapp
    group: webapp
    content: |
      save-exact=true
      package-lock=true
      audit=false
      fund=false
      loglevel=warn
      ignore-scripts=true

commands:
  01_node_install:
    command: |
      curl -sL https://rpm.nodesource.com/setup_20.x | bash -
      yum install -y nodejs
    ignoreErrors: true

  02_npm_config:
    command: |
      mkdir -p /home/webapp
      cp /tmp/.npmrc /home/webapp/.npmrc
      chown webapp:webapp /home/webapp/.npmrc
    ignoreErrors: true

packages:
  yum:
    gcc-c++: []
    make: []
    git: []
